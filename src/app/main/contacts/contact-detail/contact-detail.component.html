<div class="p-3 pt-2 bg-white" style="overflow: hidden; min-height: 100vh;">
    <div class="row">
        <div class="col-md-12" style="padding-left: 30px; border-bottom: 1px solid #f1f5f8;">
            <div class="d-flex align-items-center">
                <div class="btn text-primary fs-3 btn-back-contacts" routerLinkActive="ac"
                    [routerLinkActiveOptions]="{exact: false}" routerLink="/main/contacts/" aria-expanded="false">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M11.9473 1.00338C11.9471 1.26851 11.8416 1.52269 11.654 1.71005L6.5393 6.82472C6.38449 6.97949 6.26168 7.16324 6.1779 7.36548C6.09411 7.56771 6.05099 7.78448 6.05099 8.00338C6.05099 8.22229 6.09411 8.43905 6.1779 8.64129C6.26168 8.84353 6.38449 9.02728 6.5393 9.18205L11.6473 14.29C11.8295 14.4787 11.9303 14.7313 11.928 14.9935C11.9257 15.2556 11.8205 15.5065 11.6351 15.6919C11.4497 15.8773 11.1989 15.9824 10.9367 15.9847C10.6745 15.987 10.4219 15.8862 10.2333 15.7041L5.1253 10.6C4.43847 9.91188 4.05273 8.97932 4.05273 8.00705C4.05273 7.03478 4.43847 6.10223 5.1253 5.41405L10.24 0.29605C10.3798 0.156106 10.558 0.0607924 10.7521 0.0221697C10.9461 -0.0164531 11.1473 0.00335101 11.33 0.079076C11.5128 0.154801 11.669 0.283043 11.7789 0.447576C11.8888 0.612108 11.9474 0.805536 11.9473 1.00338Z"
                            fill="black" fill-opacity="0.87" />
                    </svg>
                    Contacts
                </div>
                <h3 class="m-0">{{model.fullname}}</h3>
            </div>
        </div>
        <div class="row">
            <div class="col-md-9 box-detail-contact">
                <div class="contact--profile">
                    <div class="contact--info">
                        <div class="contact-info--header">General Information</div>
                        <div class="contact--details">
                            <div class="contact--metadata">
                                <div class="contact-info--row" title="Email Address">
                                    <a href="mailto:{{model.bio}}" class="contact-info--details">
                                        <svg width="14" height="14" fill="none" viewBox="0 0 24 24"
                                            xmlns="http://www.w3.org/2000/svg" class="icon--font mail">
                                            <path
                                                d="M5.25 4h13.5a3.25 3.25 0 0 1 3.245 3.066L22 7.25v9.5a3.25 3.25 0 0 1-3.066 3.245L18.75 20H5.25a3.25 3.25 0 0 1-3.245-3.066L2 16.75v-9.5a3.25 3.25 0 0 1 3.066-3.245L5.25 4h13.5-13.5ZM20.5 9.373l-8.15 4.29a.75.75 0 0 1-.603.043l-.096-.042L3.5 9.374v7.376a1.75 1.75 0 0 0 1.606 1.744l.144.006h13.5a1.75 1.75 0 0 0 1.744-1.607l.006-.143V9.373ZM18.75 5.5H5.25a1.75 1.75 0 0 0-1.744 1.606L3.5 7.25v.429l8.5 4.473 8.5-4.474V7.25a1.75 1.75 0 0 0-1.607-1.744L18.75 5.5Z"
                                                fill="currentColor">
                                            </path>
                                        </svg>
                                        <span *ngIf="!model.email" class="text-muted">Not Available</span>
                                        <span *ngIf="model.email" title="minhtmu@gmail.com"
                                            class="text-truncate">{{model.email}}</span>
                                    </a>
                                </div>
                                <div class="contact-info--row" title="Phone number">
                                    <div class="contact-info--details">
                                        <svg width="14" height="14" fill="none" viewBox="0 0 24 24"
                                            xmlns="http://www.w3.org/2000/svg" class="icon--font call">
                                            <path
                                                d="m7.056 2.418 1.167-.351a2.75 2.75 0 0 1 3.302 1.505l.902 2.006a2.75 2.75 0 0 1-.633 3.139L10.3 10.11a.25.25 0 0 0-.078.155c-.044.397.225 1.17.845 2.245.451.781.86 1.33 1.207 1.637.242.215.375.261.432.245l2.01-.615a2.75 2.75 0 0 1 3.034 1.02l1.281 1.776a2.75 2.75 0 0 1-.339 3.605l-.886.84a3.75 3.75 0 0 1-3.587.889c-2.754-.769-5.223-3.093-7.435-6.924-2.215-3.836-2.992-7.14-2.276-9.913a3.75 3.75 0 0 1 2.548-2.652Zm.433 1.437a2.25 2.25 0 0 0-1.529 1.59c-.602 2.332.087 5.261 2.123 8.788 2.033 3.522 4.222 5.582 6.54 6.23a2.25 2.25 0 0 0 2.151-.534l.887-.84a1.25 1.25 0 0 0 .154-1.639l-1.28-1.775a1.25 1.25 0 0 0-1.38-.464l-2.015.617c-1.17.348-2.232-.593-3.372-2.568C9 11.93 8.642 10.9 8.731 10.099c.047-.416.24-.8.546-1.086l1.494-1.393a1.25 1.25 0 0 0 .288-1.427l-.902-2.006a1.25 1.25 0 0 0-1.5-.684l-1.168.352Z"
                                                fill="currentColor">
                                            </path>
                                        </svg>
                                        <span *ngIf="!model.phoneNumber" class="text-muted">Not Available</span>
                                        <span *ngIf="model.phoneNumber" class="text-muted">{{model.phoneNumber}}</span>
                                    </div>
                                </div>
                                <div class="contact-info--row" title="Company">
                                    <div class="contact-info--details">
                                        <svg width="14" height="14" fill="none" viewBox="0 0 24 24"
                                            xmlns="http://www.w3.org/2000/svg" class="icon--font building-bank">
                                            <path
                                                d="M13.032 2.325a1.75 1.75 0 0 0-2.064 0L3.547 7.74c-.978.713-.473 2.26.736 2.26H4.5v5.8A2.75 2.75 0 0 0 3 18.25v1.5c0 .413.336.75.75.75h16.5a.75.75 0 0 0 .75-.75v-1.5a2.75 2.75 0 0 0-1.5-2.45V10h.217c1.21 0 1.713-1.547.736-2.26l-7.421-5.416Zm-1.18 1.211a.25.25 0 0 1 .295 0L18.95 8.5H5.05l6.803-4.964ZM18 10v5.5h-2V10h2Zm-3.5 0v5.5h-1.75V10h1.75Zm-3.25 0v5.5H9.5V10h1.75Zm-5.5 7h12.5c.69 0 1.25.56 1.25 1.25V19h-15v-.75c0-.69.56-1.25 1.25-1.25ZM6 15.5V10h2v5.5H6Z"
                                                fill="currentColor">
                                            </path>
                                        </svg>

                                        <span *ngIf="!model.company" class="text-muted">Not Available</span>
                                        <span *ngIf="model.company" class="text-muted">{{model.company}}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="contact-actions">
                            <!-- <p-button icon="pi pi-comment" styleClass="p-button-primary"></p-button> -->
                            <p-button (click)="createContact()" icon="pi pi-pencil"
                                styleClass="p-button-secondary"></p-button>
                            <button (click)="confirm()" pButton icon="pi pi-trash" class="p-button-danger"></button>
                        </div>
                    </div>
                </div>
                <div class="mt-3">
                    <h4>Contact Labels</h4>
                    <!-- <p-multiSelect [options]="listLabels" [(ngModel)]="selectedLabel" defaultLabel="Select Label"
                            optionLabel="name" class="multiselect-custom">
                            <ng-template let-value pTemplate="selectedItems">
                                <div class="label-item label-item-value" *ngFor="let option of selectedLabel">
                                    <p-colorPicker [(ngModel)]="option.color" [disabled]="true"></p-colorPicker>
                                    <span class="ms-1">{{option.name}}</span>
                                </div>
                                <div *ngIf="!selectedLabel || selectedLabel.length === 0" class="label-placeholder">
                                    Select Label
                                </div>
                            </ng-template>
                            <ng-template let-label pTemplate="item">
                                <div class="label-item">
                                    <p-colorPicker [(ngModel)]="label.color" [disabled]="true"></p-colorPicker>
                                    <span class="ms-1">{{label.name}}</span>
                                </div>
                            </ng-template>
                        </p-multiSelect> -->
                    <p-multiSelect [options]="listLabels" [(ngModel)]="selectedLabel" defaultLabel="Select label"
                        optionLabel="name" class="multiselect-custom me-2" (onChange)="onChangeSelectLabel()">
                        <ng-template let-value pTemplate="selectedItems">
                            <div class="label-item label-item-value" *ngFor="let option of selectedLabel">
                                <p-colorPicker [(ngModel)]="option.color" [disabled]="true"></p-colorPicker>
                                <div class="d-inline ms-1">{{option.name}}</div>
                            </div>
                            <div *ngIf="!selectedLabel || selectedLabel.length === 0" class="label-placeholder">
                                Select Label
                            </div>
                        </ng-template>
                        <ng-template let-label pTemplate="item">
                            <div class="label-item">
                                <p-colorPicker [(ngModel)]="label.color" [disabled]="true"></p-colorPicker>
                                <div class="d-inline ms-1">{{label.name}}</div>
                            </div>
                        </ng-template>
                    </p-multiSelect>

                    <button type="button" class="btn btn-primary status-botton d-block mt-2"
                        (click)="updateContactLabel()" [disabled]="listIdLabelSelect.length == 0">
                        <svg width="16" height="16" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"
                            class="icon icon--font checkmark">
                            <path
                                d="M4.53 12.97a.75.75 0 0 0-1.06 1.06l4.5 4.5a.75.75 0 0 0 1.06 0l11-11a.75.75 0 0 0-1.06-1.06L8.5 16.94l-3.97-3.97Z"
                                fill="currentColor">
                            </path>
                        </svg>
                        <span class="button__content">
                            Update
                        </span>
                    </button>
                </div>
            </div>
            <div class="col-md-3 bg-light">
                <h4>Notes</h4>
                <div class="mb-3">
                    <textarea [rows]="5" [cols]="30" [(ngModel)]="notes" pInputTextarea [autoResize]="true"></textarea>
                    <button type="button" class="btn btn-primary" (click)="addNote()" [disabled]="!notes">Save</button>
                </div>
                <div *ngFor="let item of listNote; index as i;">
                    <textarea pInputTextarea [(ngModel)]="item.note" [autoResize]="true" [disabled]="true"></textarea>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="newContact" class="modal add-contact" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Create new contact</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="content-box">
                    <form [formGroup]="form" (ngSubmit)="onSubmitUpdate()">
                        <label class="input-container">
                            <span>Full Name<span class="text-required">*</span></span>
                            <div class="group-input">
                                <input type="text" pInputText [(ngModel)]="model.fullname" formControlName="fullname"
                                    placeholder="Please enter full name" class="form-control">
                                <div *ngIf="(f['fullname'].dirty || f['fullname'].touched || submitted) && f['fullname'].invalid"
                                    class="text-danger">
                                    <div *ngIf="f['fullname'].errors?.['required']">
                                        Please enter Full name
                                    </div>
                                </div>
                            </div>
                        </label>
                        <label class="input-container">
                            <span>Email<span class="text-required">*</span></span>
                            <div class="group-input">
                                <input type="text" pInputText [(ngModel)]="model.email" formControlName="email"
                                    placeholder="Please enter email" class="form-control">
                                <div *ngIf="(f['email'].dirty || f['email'].touched || submitted) && f['email'].invalid"
                                    class="text-danger">
                                    <div *ngIf="f['email'].errors?.['required']">
                                        Please enter email
                                    </div>
                                    <div *ngIf="f['email'].errors?.['email']">
                                        Please enter a valid email
                                    </div>
                                </div>
                            </div>
                        </label>
                        <label class="input-container">
                            <span>Phone number</span>
                            <div class="group-input">
                                <input type="text" pInputText [(ngModel)]="model.phoneNumber"
                                    formControlName="phoneNumber" placeholder="Please enter phone number"
                                    class="form-control">
                            </div>
                            <p>*Phone number should be of E.164 format eg: +1415555555 [+][country code][area
                                code][local phone number]</p>
                        </label>
                        <label class="input-container">
                            <span>Company name</span>
                            <div class="group-input">
                                <input type="text" pInputText [(ngModel)]="model.company" formControlName="company"
                                    placeholder="Please enter company name" class="form-control">
                            </div>
                        </label>
                        <label class="input-container">
                            <span>Country</span>
                            <div class="group-input">
                                <p-dropdown [options]="countries" [(ngModel)]="model.country" optionLabel="name"
                                    optionValue="id" formControlName="country"></p-dropdown>
                            </div>
                        </label>
                        <label class="input-container">
                            <span>City</span>
                            <div class="group-input">
                                <input type="text" pInputText [(ngModel)]="model.city" formControlName="city"
                                    placeholder="Please enter city" class="form-control">
                            </div>
                        </label>
                        <label class="input-container">
                            <span>Address</span>
                            <div class="group-input">
                                <input type="text" pInputText [(ngModel)]="model.address" formControlName="address"
                                    placeholder="Please enter address" class="form-control">
                            </div>
                        </label>
                        <label class="input-container m-0">
                            <span>Social profile</span>
                            <div class="group-input">
                                <div class="d-flex align-items-center mb-2">
                                    <span class="text-social">
                                        https://facebook.com/
                                    </span>
                                    <input type="text" pInputText [(ngModel)]="model.facebook"
                                        formControlName="facebook" placeholder="..." class="form-control">
                                </div>
                                <div class="d-flex align-items-center mb-2">
                                    <span class="text-social">
                                        https://twitter.com/
                                    </span>
                                    <input type="text" pInputText [(ngModel)]="model.twitter" formControlName="twitter"
                                        placeholder="..." class="form-control">
                                </div>
                                <div class="d-flex align-items-center mb-2">
                                    <span class="text-social">
                                        https://linkedin.com/
                                    </span>
                                    <input type="text" pInputText [(ngModel)]="model.linkedin"
                                        formControlName="linkedin" placeholder="..." class="form-control">
                                </div>
                                <div class="d-flex align-items-center">
                                    <span class="text-social">
                                        https://github.com/
                                    </span>
                                    <input type="text" pInputText [(ngModel)]="model.github" formControlName="github"
                                        placeholder="..." class="form-control">
                                </div>
                            </div>
                        </label>
                    </form>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="submit" class="btn btn-primary" [disabled]="form.invalid"
                    (click)="onSubmitUpdate()">Save</button>
            </div>
        </div>
    </div>
</div>