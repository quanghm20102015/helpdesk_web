<div class="p-3 box-container" style="overflow: hidden">
    <div class="row ms-3">
        <div class="col-md-6">
            <h3 title="Contacts" class="page-title p-10">
                Contacts
            </h3>
        </div>
        <div class="col-md-6">
            <div class="d-flex justify-content-end">
                <div class="search">
                    <a class="search--link">
                        <span class="p-input-icon-left py-3 w-100">
                            <i class="pi pi-search"></i>
                            <input type="text" pInputText [(ngModel)]="textSearch" placeholder="Search"
                                (keyup.enter)="getContact()">
                        </span>
                    </a>
                </div>

                <!-- <button class="transparent" type="submit">
                <svg data-v-2beb9cd3="" width="16" height="16" fill="none"
                    viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="icon icon--font filter">
                    <path
                        d="M13.5 16a.75.75 0 0 1 0 1.5h-3a.75.75 0 0 1 0-1.5h3Zm3-5a.75.75 0 0 1 0 1.5h-9a.75.75 0 0 1 0-1.5h9Zm3-5a.75.75 0 0 1 0 1.5h-15a.75.75 0 0 1 0-1.5h15Z"
                        fill="currentColor">
                    </path>
                </svg>
                <span class="button__content">
                    Filter
                </span>
            </button> -->

                <button class="transparent-contact" type="submit" (click)="createContact()">
                    <svg width="16" height="16" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"
                        class="icon icon--font person-add">
                        <path
                            d="M17.5 12a5.5 5.5 0 1 1 0 11a5.5 5.5 0 0 1 0-11zm-5.477 2a6.47 6.47 0 0 0-.709 1.5H4.253a.749.749 0 0 0-.75.75v.577c0 .535.192 1.053.54 1.46c1.253 1.469 3.22 2.214 5.957 2.214c.597 0 1.157-.035 1.68-.106c.246.495.553.954.912 1.367c-.795.16-1.66.24-2.592.24c-3.146 0-5.532-.906-7.098-2.74a3.75 3.75 0 0 1-.898-2.435v-.578A2.249 2.249 0 0 1 4.253 14h7.77zm5.477 0l-.09.008a.5.5 0 0 0-.402.402L17 14.5V17h-2.496l-.09.008a.5.5 0 0 0-.402.402l-.008.09l.008.09a.5.5 0 0 0 .402.402l.09.008H17L17 20.5l.008.09a.5.5 0 0 0 .402.402l.09.008l.09-.008a.5.5 0 0 0 .402-.402L18 20.5V18h2.504l.09-.008a.5.5 0 0 0 .402-.402l.008-.09l-.008-.09a.5.5 0 0 0-.402-.402l-.09-.008H18L18 14.5l-.008-.09a.5.5 0 0 0-.402-.402L17.5 14zM10 2.005a5 5 0 1 1 0 10a5 5 0 0 1 0-10zm0 1.5a3.5 3.5 0 1 0 0 7a3.5 3.5 0 0 0 0-7z"
                            fill="currentColor">
                        </path>
                    </svg>
                    <span class="button__content">
                        New Contact
                    </span>
                </button>
                <!-- <button class="transparent-import" type="submit" (click)="import()">
                <svg width="16"
                    height="16" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"
                    class="icon icon--font upload">
                    <path
                        d="M6.087 7.75a5.752 5.752 0 0 1 11.326 0h.087a4 4 0 0 1 3.962 4.552 6.534 6.534 0 0 0-1.597-1.364A2.501 2.501 0 0 0 17.5 9.25h-.756a.75.75 0 0 1-.75-.713 4.25 4.25 0 0 0-8.489 0 .75.75 0 0 1-.749.713H6a2.5 2.5 0 0 0 0 5h4.4a6.458 6.458 0 0 0-.357 1.5H6a4 4 0 0 1 0-8h.087ZM22 16.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0Zm-6-1.793V19.5a.5.5 0 0 0 1 0v-4.793l1.646 1.647a.5.5 0 0 0 .708-.708l-2.5-2.5a.5.5 0 0 0-.708 0l-2.5 2.5a.5.5 0 0 0 .708.708L16 14.707Z"
                        fill="currentColor"></path>
                </svg>
                <span class="button__content">
                    Import
                </span>
            </button> -->
            </div>
        </div>
    </div>
    <div class="row box-contacts">
        <div class="col-12 p-0" style="max-height:calc(100vh - 95px);">
            <p-table [value]="contacts" [tableStyle]="{ 'min-width': '50rem' }" [scrollable]="true" scrollHeight="100%" id="box-content">
                <ng-template pTemplate="header">
                    <tr>
                        <th>NAME</th>
                        <th>EMAIL ADDRESS</th>
                        <th>PHONE NUMBER</th>
                        <th>COMPANY</th>
                        <th>CITY</th>
                        <th>COUNTRY</th>
                        <th>SOCIAL PROFILES</th>
                        <th>LAST ACTIVITY</th>
                        <th>CREATE AT</th>
                        <th>CONVERSATIONS</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-contact>
                    <tr>
                        <td class="pointer text-primary" routerLinkActive="active"
                            [routerLinkActiveOptions]="{exact: false}"
                            [routerLink]="'/main/contacts/detail/' + contact.id" aria-expanded="false"
                            title="viewDetail">{{ contact.fullname }}</td>
                        <td>{{ contact.email }}</td>
                        <td>{{ contact.phoneNumber }}</td>
                        <td>{{ contact.company }}</td>
                        <td>{{ contact.city }}</td>
                        <td>{{ contact.country }}</td>
                        <td>{{ contact.socialProfiles }}</td>
                        <td>{{ contact.lastActivity }}</td>
                        <td>{{ contact.createAt }}</td>
                        <td>{{ contact.conversations }}</td>
                    </tr>
                </ng-template>
            </p-table>
        </div>
    </div>
</div>

<div id="newContact" class="modal add-contact" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Create new contact</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="content-box">
                    <form [formGroup]="form" (ngSubmit)="onSubmit()">
                        <label class="input-container">
                            <span>Full Name<span class="text-required">*</span></span>
                            <div class="group-input">
                                <input type="text" pInputText [(ngModel)]="model.fullname" formControlName="fullname"
                                    placeholder="Please enter full name" class="form-control">
                                <div *ngIf="(f['fullname'].dirty || f['fullname'].touched || submitted) && f['fullname'].invalid"
                                    class="text-danger">
                                    <div *ngIf="f['fullname'].errors?.['required']">
                                        Please enter Full name
                                    </div>
                                </div>
                            </div>
                        </label>
                        <label class="input-container">
                            <span>Email<span class="text-required">*</span></span>
                            <div class="group-input">
                                <input type="text" pInputText [(ngModel)]="model.email" formControlName="email"
                                    placeholder="Please enter email" class="form-control">
                                <div *ngIf="(f['email'].dirty || f['email'].touched || submitted) && f['email'].invalid"
                                    class="text-danger">
                                    <div *ngIf="f['email'].errors?.['required']">
                                        Please enter email
                                    </div>
                                    <div *ngIf="f['email'].errors?.['email']">
                                        Please enter a valid email
                                    </div>
                                </div>
                            </div>
                        </label>
                        <!-- <label class="input-container">
                            <span>Bio</span>
                            <div class="group-input">
                                <input type="text" pInputText [(ngModel)]="model.bio" formControlName="bio"
                                    placeholder="Bio" class="form-control">
                            </div>
                        </label> -->
                        <label class="input-container">
                            <span>Phone number</span>
                            <div class="group-input">
                                <input type="text" pInputText [(ngModel)]="model.phoneNumber"
                                    formControlName="phoneNumber" placeholder="Please enter phone number"
                                    class="form-control">
                            </div>
                            <p>*Phone number should be of E.164 format eg: +1415555555 [+][country code][area
                                code][local phone number]</p>
                        </label>
                        <label class="input-container">
                            <span>Company name</span>
                            <div class="group-input">
                                <input type="text" pInputText [(ngModel)]="model.company" formControlName="company"
                                    placeholder="Please enter company name" class="form-control">
                            </div>
                        </label>
                        <label class="input-container">
                            <span>Country</span>
                            <div class="group-input">
                                <p-dropdown [options]="countries" [(ngModel)]="model.country" optionLabel="name"
                                    optionValue="id" formControlName="country"></p-dropdown>
                            </div>
                        </label>
                        <label class="input-container">
                            <span>City</span>
                            <div class="group-input">
                                <input type="text" pInputText [(ngModel)]="model.city" formControlName="city"
                                    placeholder="Please enter city" class="form-control">
                            </div>
                        </label>
                        <label class="input-container">
                            <span>Address</span>
                            <div class="group-input">
                                <input type="text" pInputText [(ngModel)]="model.address" formControlName="address"
                                    placeholder="Please enter address" class="form-control">
                            </div>
                        </label>
                        <label class="input-container m-0">
                            <span>Social profile</span>
                            <div class="group-input">
                                <div class="d-flex align-items-center mb-2">
                                    <span class="text-social">
                                        https://facebook.com/
                                    </span>
                                    <input type="text" pInputText [(ngModel)]="model.facebook"
                                        formControlName="facebook" placeholder="..." class="form-control">
                                </div>
                                <div class="d-flex align-items-center mb-2">
                                    <span class="text-social">
                                        https://twitter.com/
                                    </span>
                                    <input type="text" pInputText [(ngModel)]="model.twitter" formControlName="twitter"
                                        placeholder="..." class="form-control">
                                </div>
                                <div class="d-flex align-items-center mb-2">
                                    <span class="text-social">
                                        https://linkedin.com/
                                    </span>
                                    <input type="text" pInputText [(ngModel)]="model.linkedin"
                                        formControlName="linkedin" placeholder="..." class="form-control">
                                </div>
                                <div class="d-flex align-items-center">
                                    <span class="text-social">
                                        https://github.com/
                                    </span>
                                    <input type="text" pInputText [(ngModel)]="model.github" formControlName="github"
                                        placeholder="..." class="form-control">
                                </div>
                            </div>
                        </label>
                    </form>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="submit" class="btn btn-primary" [disabled]="form.invalid"
                    (click)="onSubmit()">Create</button>
            </div>
        </div>
    </div>
</div>


<div id="import" class="modal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Import Contacts</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="content-box">
                    <form [formGroup]="formImport" (ngSubmit)="onSubmitFile()">
                        <p>
                            Import contacts through a CSV file. Download a sample csv.
                        </p>
                        <label class="input-container">
                            <span>CSV File</span>
                            <div class="group-input">
                                <button type="button" class="btn" style="border-color: black;">Choose file</button>
                            </div>
                        </label>
                    </form>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary">Submit</button>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            </div>
        </div>
    </div>
</div>