<div class="container-box">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12 box-header">
                <div class="d-flex justify-content-between align-items-center">
                    <h3 class="page-title mb-0">
                        Agents
                        <svg width="17" height="16" viewBox="0 0 17 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <g clip-path="url(#clip0_389_61016)">
                                <path
                                    d="M8.50025 0C6.918 0 5.37128 0.469192 4.05569 1.34824C2.74009 2.22729 1.71471 3.47672 1.10921 4.93853C0.50371 6.40034 0.345284 8.00887 0.653966 9.56072C0.962647 11.1126 1.72457 12.538 2.84339 13.6569C3.96221 14.7757 5.38768 15.5376 6.93953 15.8463C8.49137 16.155 10.0999 15.9965 11.5617 15.391C13.0235 14.7855 14.273 13.7602 15.152 12.4446C16.0311 11.129 16.5002 9.58225 16.5002 8C16.498 5.87897 15.6544 3.84547 14.1546 2.34568C12.6548 0.845886 10.6213 0.00229405 8.50025 0V0ZM8.50025 14.6667C7.18171 14.6667 5.89277 14.2757 4.79645 13.5431C3.70012 12.8106 2.84564 11.7694 2.34105 10.5512C1.83647 9.33305 1.70444 7.99261 1.96168 6.6994C2.21891 5.40619 2.85385 4.21831 3.7862 3.28596C4.71855 2.35361 5.90644 1.71867 7.19965 1.46143C8.49285 1.2042 9.8333 1.33622 11.0515 1.8408C12.2696 2.34539 13.3108 3.19987 14.0434 4.2962C14.7759 5.39253 15.1669 6.68146 15.1669 8C15.165 9.76752 14.462 11.4621 13.2121 12.7119C11.9623 13.9617 10.2678 14.6647 8.50025 14.6667Z"
                                    fill="#7C7C7E" />
                                <path
                                    d="M8.50008 6.66699H7.83341C7.6566 6.66699 7.48703 6.73723 7.36201 6.86225C7.23699 6.98728 7.16675 7.15685 7.16675 7.33366C7.16675 7.51047 7.23699 7.68004 7.36201 7.80506C7.48703 7.93009 7.6566 8.00033 7.83341 8.00033H8.50008V12.0003C8.50008 12.1771 8.57032 12.3467 8.69534 12.4717C8.82036 12.5968 8.98993 12.667 9.16674 12.667C9.34355 12.667 9.51312 12.5968 9.63815 12.4717C9.76317 12.3467 9.83341 12.1771 9.83341 12.0003V8.00033C9.83341 7.6467 9.69293 7.30757 9.44289 7.05752C9.19284 6.80747 8.8537 6.66699 8.50008 6.66699Z"
                                    fill="#7C7C7E" />
                                <path
                                    d="M8.50024 5.33301C9.05253 5.33301 9.50024 4.88529 9.50024 4.33301C9.50024 3.78072 9.05253 3.33301 8.50024 3.33301C7.94796 3.33301 7.50024 3.78072 7.50024 4.33301C7.50024 4.88529 7.94796 5.33301 8.50024 5.33301Z"
                                    fill="#7C7C7E" />
                            </g>
                            <defs>
                                <clipPath id="clip0_389_61016">
                                    <rect width="16" height="16" fill="white" transform="translate(0.500244)" />
                                </clipPath>
                            </defs>
                        </svg>

                    </h3>
                    <div class="text-right">
                        <button type="submit" class="btn btn-primary border-0" (click)="showDialog()">
                            <svg width="17" height="16" viewBox="0 0 17 16" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M11.8333 7.33333H9.16667V4.66667C9.16667 4.48986 9.09643 4.32029 8.9714 4.19526C8.84638 4.07024 8.67681 4 8.5 4C8.32319 4 8.15362 4.07024 8.0286 4.19526C7.90357 4.32029 7.83333 4.48986 7.83333 4.66667V7.33333H5.16667C4.98986 7.33333 4.82029 7.40357 4.69526 7.5286C4.57024 7.65362 4.5 7.82319 4.5 8C4.5 8.17681 4.57024 8.34638 4.69526 8.4714C4.82029 8.59643 4.98986 8.66667 5.16667 8.66667H7.83333V11.3333C7.83333 11.5101 7.90357 11.6797 8.0286 11.8047C8.15362 11.9298 8.32319 12 8.5 12C8.67681 12 8.84638 11.9298 8.9714 11.8047C9.09643 11.6797 9.16667 11.5101 9.16667 11.3333V8.66667H11.8333C12.0101 8.66667 12.1797 8.59643 12.3047 8.4714C12.4298 8.34638 12.5 8.17681 12.5 8C12.5 7.82319 12.4298 7.65362 12.3047 7.5286C12.1797 7.40357 12.0101 7.33333 11.8333 7.33333Z"
                                    fill="white" />
                            </svg>
                            Add Agent
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="row max-height-box">
            <div class="col-md-12">
                <p-table [value]="listData">
                    <ng-template pTemplate="body" let-item>
                        <tr>
                            <td class="d-flex">
                                <div title="" class="columns user-thumbnail-box is-rounded"
                                    style="height: 40px; width: 40px; margin-right: 16px;">
                                    <img src="./../../../../assets/img/programmer.png"
                                        class="user-thumbnail thumbnail-rounded">
                                    <div aria-hidden="true" class="avatar-container user-thumbnail  thumbnail-rounded"
                                        style="font-size: 16px; display: none;">
                                        TQ
                                    </div>
                                    <div class="source-badge user-online-status user-online-status--online"
                                        style="width: 10px; height: 10px;"></div>
                                </div>
                                <div>
                                    <div class="agent-name">
                                        {{item.fullname}}
                                    </div>
                                    <div>{{item.workemail}}</div>
                                </div>
                            </td>
                            <td>
                                <div class="agent-name">
                                    {{item.roleName}}
                                </div>
                                <div *ngIf="item.confirm" class="text-success">
                                    Verified
                                </div>
                                <div *ngIf="!item.confirm" class="text-danger">
                                    Unverified
                                </div>
                            </td>
                            <td>
                                <div class="button-wrapper text-end">
                                    <button class="btn btn-sm btn-default" (click)="showDialogUpdate(item)">
                                        <svg width="17" height="16" viewBox="0 0 17 16" fill="none"
                                            xmlns="http://www.w3.org/2000/svg">
                                            <g clip-path="url(#clip0_1490_6513)">
                                                <path
                                                    d="M12.9374 0.620374L4.80945 8.74837C4.49901 9.05714 4.2529 9.42441 4.08537 9.82894C3.91784 10.2335 3.83221 10.6672 3.83345 11.105V12.0004C3.83345 12.1772 3.90369 12.3468 4.02871 12.4718C4.15373 12.5968 4.3233 12.667 4.50011 12.667H5.39545C5.83329 12.6683 6.26703 12.5827 6.67155 12.4151C7.07608 12.2476 7.44335 12.0015 7.75212 11.691L15.8801 3.56304C16.2697 3.17249 16.4885 2.64336 16.4885 2.09171C16.4885 1.54006 16.2697 1.01093 15.8801 0.620374C15.4839 0.241636 14.9569 0.0302734 14.4088 0.0302734C13.8607 0.0302734 13.3337 0.241636 12.9374 0.620374ZM14.9374 2.62037L6.80945 10.7484C6.43353 11.122 5.92545 11.3323 5.39545 11.3337H5.16678V11.105C5.16817 10.575 5.37849 10.067 5.75211 9.69104L13.8801 1.56304C14.0225 1.42701 14.2119 1.3511 14.4088 1.3511C14.6057 1.3511 14.7951 1.42701 14.9374 1.56304C15.0774 1.70338 15.156 1.8935 15.156 2.09171C15.156 2.28991 15.0774 2.48003 14.9374 2.62037Z"
                                                    fill="black" fill-opacity="0.87" />
                                                <path
                                                    d="M15.3619 6.18126C15.487 6.05624 15.6565 5.986 15.8333 5.986C16.0101 5.986 16.1797 6.05624 16.3047 6.18126C16.4298 6.30629 16.5 6.47586 16.5 6.65267V10.8953C16.5011 11.3332 16.4153 11.767 16.2477 12.1715C16.08 12.576 15.8338 12.9432 15.5233 13.252L13.7527 15.024C13.4438 15.3345 13.0764 15.5806 12.6718 15.7481C12.2671 15.9156 11.8333 16.0013 11.3953 16H3.83333C2.9496 15.9989 2.10237 15.6474 1.47748 15.0225C0.852588 14.3976 0.501059 13.5504 0.5 12.6667V3.33333C0.501059 2.4496 0.852588 1.60237 1.47748 0.97748C2.10237 0.352588 2.9496 0.00105857 3.83333 0H9.86133C10.0381 0 10.2077 0.0702379 10.3327 0.195262C10.4578 0.320286 10.528 0.489856 10.528 0.666667C10.528 0.843478 10.4578 1.01305 10.3327 1.13807C10.2077 1.2631 10.0381 1.33333 9.86133 1.33333H3.83333C3.3029 1.33333 2.79419 1.54405 2.41912 1.91912C2.04405 2.29419 1.83333 2.8029 1.83333 3.33333V12.6667C1.83333 13.1971 2.04405 13.7058 2.41912 14.0809C2.79419 14.456 3.3029 14.6667 3.83333 14.6667H10.5L11.8333 14.6147C12.2031 14.5337 12.542 14.3487 12.81 14.0813L14.5833 12.3093C14.8493 12.0406 15.0342 11.7023 15.1167 11.3333L15.1667 10V6.65267C15.1667 6.47586 15.2369 6.30629 15.3619 6.18126Z"
                                                    fill="black" fill-opacity="0.87" />
                                            </g>
                                            <defs>
                                                <clipPath id="clip0_1490_6513">
                                                    <rect width="16" height="16" fill="white"
                                                        transform="translate(0.5)" />
                                                </clipPath>
                                            </defs>
                                        </svg>
                                    </button>
                                    <button (click)="confirm(item.id)" class="btn btn-sm btn-default">
                                        <svg width="17" height="16" viewBox="0 0 17 16" fill="none"
                                            xmlns="http://www.w3.org/2000/svg">
                                            <g clip-path="url(#clip0_1490_7159)">
                                                <path
                                                    d="M14.4999 2.66667H12.4333C12.2785 1.91428 11.8691 1.23823 11.2741 0.752479C10.679 0.266727 9.93472 0.000969683 9.16658 0L7.83325 0C7.06511 0.000969683 6.3208 0.266727 5.72575 0.752479C5.13071 1.23823 4.72132 1.91428 4.56659 2.66667H2.49992C2.32311 2.66667 2.15354 2.7369 2.02851 2.86193C1.90349 2.98695 1.83325 3.15652 1.83325 3.33333C1.83325 3.51014 1.90349 3.67971 2.02851 3.80474C2.15354 3.92976 2.32311 4 2.49992 4H3.16659V12.6667C3.16764 13.5504 3.51917 14.3976 4.14407 15.0225C4.76896 15.6474 5.61619 15.9989 6.49992 16H10.4999C11.3836 15.9989 12.2309 15.6474 12.8558 15.0225C13.4807 14.3976 13.8322 13.5504 13.8333 12.6667V4H14.4999C14.6767 4 14.8463 3.92976 14.9713 3.80474C15.0963 3.67971 15.1666 3.51014 15.1666 3.33333C15.1666 3.15652 15.0963 2.98695 14.9713 2.86193C14.8463 2.7369 14.6767 2.66667 14.4999 2.66667ZM7.83325 1.33333H9.16658C9.5801 1.33384 9.98334 1.46225 10.321 1.70096C10.6587 1.93967 10.9142 2.27699 11.0526 2.66667H5.94725C6.08564 2.27699 6.34119 1.93967 6.67884 1.70096C7.0165 1.46225 7.41974 1.33384 7.83325 1.33333ZM12.4999 12.6667C12.4999 13.1971 12.2892 13.7058 11.9141 14.0809C11.5391 14.456 11.0304 14.6667 10.4999 14.6667H6.49992C5.96949 14.6667 5.46078 14.456 5.08571 14.0809C4.71063 13.7058 4.49992 13.1971 4.49992 12.6667V4H12.4999V12.6667Z"
                                                    fill="#EF4438" />
                                                <path
                                                    d="M7.16667 11.9993C7.34348 11.9993 7.51304 11.9291 7.63807 11.8041C7.76309 11.6791 7.83333 11.5095 7.83333 11.3327V7.33268C7.83333 7.15587 7.76309 6.9863 7.63807 6.86128C7.51304 6.73625 7.34348 6.66602 7.16667 6.66602C6.98985 6.66602 6.82029 6.73625 6.69526 6.86128C6.57024 6.9863 6.5 7.15587 6.5 7.33268V11.3327C6.5 11.5095 6.57024 11.6791 6.69526 11.8041C6.82029 11.9291 6.98985 11.9993 7.16667 11.9993Z"
                                                    fill="#EF4438" />
                                                <path
                                                    d="M9.83324 11.9993C10.01 11.9993 10.1796 11.9291 10.3046 11.8041C10.4297 11.6791 10.4999 11.5095 10.4999 11.3327V7.33268C10.4999 7.15587 10.4297 6.9863 10.3046 6.86128C10.1796 6.73625 10.01 6.66602 9.83324 6.66602C9.65642 6.66602 9.48685 6.73625 9.36183 6.86128C9.2368 6.9863 9.16656 7.15587 9.16656 7.33268V11.3327C9.16656 11.5095 9.2368 11.6791 9.36183 11.8041C9.48685 11.9291 9.65642 11.9993 9.83324 11.9993Z"
                                                    fill="#EF4438" />
                                            </g>
                                            <defs>
                                                <clipPath id="clip0_1490_7159">
                                                    <rect width="16" height="16" fill="white"
                                                        transform="translate(0.5)" />
                                                </clipPath>
                                            </defs>
                                        </svg>
                                    </button>
                                </div>
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>
            <!-- <div class="col-md-4">
                <span>
                    <p><b>Inbox</b></p>
                    <p> When you connect a website or a facebook Page to Chatwoot, it is called an <b>Inbox</b>. You
                        can
                        have unlimited inboxes in your Chatwoot account. </p>
                    <p> Click on <b>Add Inbox</b> to connect a website or a Facebook Page. </p>
                    <p> In the Dashboard, you can see all the conversations from all your inboxes in a single place
                        and
                        respond to them under the `Conversations` tab. </p>
                    <p> You can also see conversations specific to an inbox by clicking on the inbox name on the
                        left
                        pane of the dashboard. </p>
                </span>
            </div> -->
        </div>
    </div>
</div>

<p-dialog [(visible)]="display" [modal]="true" class="box-dialog" [style]="{width: '513px'}">
    <ng-template pTemplate="header">
        <div>
            <p class="p-dialog-title">
                Add agent to your team
            </p>
            <p class="text-secondary">
                You can add people who will be able to handle support for your inboxes.
            </p>
        </div>
    </ng-template>
    <form class="row" [formGroup]="form">
        <div class="col-md-12">
            <label class="label-input">
                <span class="text-label">Agent Name</span>
                <input type="text" pInputText [(ngModel)]="model.fullname" formControlName="fullname" placeholder="Agent Name"
                    class="form-control">
                <div *ngIf="(f['fullname'].dirty || f['fullname'].touched || submitted) && f['fullname'].invalid"
                    class="text-danger">
                    <div *ngIf="f['fullname'].errors?.['required']">
                        Agent Name is required
                    </div>
                </div>
            </label>
        </div>
        <div class="col-md-12">
            <label class="label-input">
                <span class="text-label">Role</span>
                <div>
                    <p-dropdown [options]="listRole" [(ngModel)]="model.role" formControlName="role" optionLabel="name"
                        optionValue="value"></p-dropdown>
                </div>
            </label>
        </div>
        <div class="col-md-12">
            <label class="label-input">
                <span class="text-label">Email Address</span>
                <input type="text" pInputText [(ngModel)]="model.workemail" formControlName="workemail"
                    placeholder="workemail eg: someone@example.com" class="form-control">
                <div *ngIf="(f['workemail'].dirty || f['workemail'].touched || submitted) && f['workemail'].invalid"
                    class="text-danger">
                    <div *ngIf="f['workemail'].errors?.['required']">
                        Workemail is required
                    </div>
                    <div *ngIf="f['workemail'].errors?.['email']">
                        Please enter a valid email
                    </div>
                </div>
            </label>
        </div>
        <div class="modal-footer">
            <div class="btn-groupt">
                <button type="button" (click)="onSave()" class="btn btn-primary"
                    [disabled]="f['fullname'].errors || f['workemail'].errors">
                    <span>Add Agent</span>
                </button>
                <button class="btn btn-secondary ml-2" (click)="display=false" label="Ok">
                    Cancel
                </button>
            </div>
        </div>
    </form>
</p-dialog>

<p-toast position="bottom-right"></p-toast>